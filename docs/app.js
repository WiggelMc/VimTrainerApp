let favicon=document.querySelector("link#favicon"),isDarkMode=window.matchMedia("(prefers-color-scheme: dark)"),changeFavicon=()=>{null!=favicon&&(isDarkMode.matches?favicon.href="./assets/favicon-dark.png":favicon.href="./assets/favicon-light.png")},confirmExit=(changeFavicon(),isDarkMode.addEventListener?.("change",changeFavicon),window.addEventListener("click",()=>{document.getElementById("keyListener")?.focus()}),!1);function getFlags(){return{storagePackets:Object.entries(localStorage).map(([key,data])=>({key:key,data:data??null}))}}function registerPorts(app){app.ports?.setShouldConfirmExit?.subscribe(shouldConfirmExit=>{confirmExit=shouldConfirmExit}),app.ports?.putSave?.subscribe(({key,data})=>{null===data?localStorage.removeItem(key):localStorage.setItem(key,data)}),app.ports?.putLoad?.subscribe(key=>{var data=localStorage.getItem(key);app.ports?.getLoad?.send({key:key,data:data})}),window.addEventListener("storage",event=>{event={key:event.key,data:event.newValue};app.ports?.getChange?.send(event)})}window.addEventListener("beforeunload",e=>{confirmExit&&(e.preventDefault(),e.returnValue="")});